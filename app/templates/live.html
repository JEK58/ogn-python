{% extends "base.html" %}

{% block styles %}
    {{super()}}
	<style>
	html, body {
		height: 100%;
		margin: 0;
		padding: 0;
	}
	#map {
		height: 100%;
    }
	</style>
{% endblock %}

{% block content %} 
	<div id="map"></div>
	<script>

var map;
function initMap() {
	google.maps.event.addDomListener(window, 'load', function() {
	    var map;
	    var mapOptions = {
	            zoom: 8,
	            center: new google.maps.LatLng(48, 11),
	            mapTypeId: google.maps.MapTypeId.TERRAIN
	    }
	
		map = new google.maps.Map(document.getElementById('map'), mapOptions);
	    
	    $.getJSON('/aircraft_beacons', function(data){ 
	        $.each(data.aircraft_beacons, function(i, item) {
	            var latlng = new google.maps.LatLng(item.lat,item.lng);
	            var marker = new google.maps.Marker({
	                position: latlng,
	                map: map
	            });
	            if (item.registration === null) {
	            	//marker.setIcon('http://maps.google.com/mapfiles/marker_yellow.png');
	            	marker.setTitle(i);
	            } else {
	            	marker.setIcon('http://maps.google.com/mapfiles/arrow.png');
	            	marker.setTitle(item.registration);
	            }
	        });        
	    });
	});
}

	</script>
	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSrHEX6a5Lii_w3Uao-bToYvnfAtX5ivE&signed_in=true&callback=initMap"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
{% endblock %}